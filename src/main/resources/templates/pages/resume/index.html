<!-- templates/pages/resume/show.html -->
<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/base}">
<head>
    <title layout:fragment="title">이력 사항 조회</title>

    <th:block layout:fragment="head-extra">
        <!-- 커스텀 style 없이 Bootstrap4 + SB Admin 2 유틸리티만 사용 -->
    </th:block>
</head>
<body>
<section layout:fragment="content" th:object="${member}">
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <div>
            <h1 class="h3 mb-0 text-gray-800">이력 사항 조회</h1>
            <div class="small text-gray-600 mt-1">
                공공기관 지원을 위해 등록한 이력 정보를 확인하는 페이지입니다.
            </div>
        </div>
        <div>
            <a th:href="@{/resumes}" class="d-none d-sm-inline-block btn btn-sm btn-secondary shadow-sm mr-2">
                <i class="fas fa-arrow-left fa-sm text-white-50"></i> 목록으로
            </a>
            <!-- 수정 페이지가 있을 경우 -->
            <a th:href="@{/resumes/edit}"
               class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm mr-2">
                <i class="fas fa-edit fa-sm text-white-50"></i> 이력 수정
            </a>
            <button type="button"
                    class="d-none d-sm-inline-block btn btn-sm btn-outline-info shadow-sm"
                    onclick="window.print()">
                <i class="fas fa-print fa-sm text-info"></i> 인쇄
            </button>
        </div>
    </div>

    <div class="row">
        <!-- 좌측: 기본 정보 / 프로필 -->
        <div class="col-lg-4 mb-4">

            <!-- Member: 기본 정보 -->
            <div class="card shadow mb-4">
                <div class="card-header py-3 d-flex justify-content-between align-items-center">
                    <h6 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-id-card-alt mr-1"></i> 기본 정보 (Member)
                    </h6>
                    <span class="badge badge-light small" th:text="*{id}">MEMBER_ID</span>
                </div>
                <div class="card-body">
                    <!-- 프로필 이미지 -->
                    <div class="text-center mb-3">
                        <img th:if="*{profileImageSrc != null}"
                             th:src="*{profileImageSrc}"
                             class="img-profile mb-2"
                             style="width: 180px; height: 240px; object-fit: cover;"
                             alt="프로필 이미지">
                        <div th:if="*{profileImageSrc == null}"
                             class="d-inline-block rounded-circle bg-light mb-2"
                             style="width: 140px; height: 140px; display:flex; align-items:center; justify-content:center;">
                            <i class="fas fa-user text-gray-400" style="font-size: 3rem;"></i>
                        </div>
                        <div class="small text-muted">
                            등록된 프로필 이미지가 없을 경우 기본 아이콘이 표시됩니다.
                        </div>
                    </div>

                    <hr>

                    <div class="mb-2">
                        <div class="small text-gray-600">이름</div>
                        <div class="font-weight-bold" th:text="*{name} ?: '-'">홍길동</div>
                    </div>

                    <!-- 필요 시 추가 기본 정보 필드 확장 -->
                    <!--
                    <div class="mb-2">
                        <div class="small text-gray-600">이메일</div>
                        <div class="font-weight-bold" th:text="*{email} ?: '-'">email@example.com</div>
                    </div>
                    -->
                </div>
            </div>
        </div>

        <!-- 우측: 학력 / 경력 / 활동 / 연수 / 자격 / 어학 / 해외 -->
        <div class="col-lg-8 mb-4">

            <!-- Education: 학력 -->
            <div class="card shadow mb-4">
                <div class="card-header py-3 d-flex align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-graduation-cap mr-1"></i> 학력 (Education)
                    </h6>
                </div>
                <div class="card-body">
                    <div th:if="*{educations == null or #lists.isEmpty(educations)}"
                         class="text-muted small">
                        등록된 학력 정보가 없습니다.
                    </div>

                    <div th:each="edu, stat : *{educations}"
                         class="border rounded bg-light p-3 mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="entity-block-title small font-weight-bold text-primary">
                                학력 [[${stat.index + 1}]]
                            </span>
                            <span class="badge badge-pill badge-secondary"
                                  th:switch="${edu.status}">
                                <span th:case="'재학'" th:text="${edu.status}">재학</span>
                                <span th:case="'휴학'" th:text="${edu.status}">휴학</span>
                                <span th:case="'졸업'" th:text="${edu.status}">졸업</span>
                                <span th:case="*"
                                      th:text="${edu.status} ?: '상태 미입력'">상태 미입력</span>
                            </span>
                        </div>

                        <div class="row small">
                            <div class="col-md-4 mb-1">
                                <div class="text-gray-600">학교 구분</div>
                                <div th:switch="${edu.schoolType}">
                                    <span th:case="'HIGH'">고등학교</span>
                                    <span th:case="'COLLEGE'">전문대</span>
                                    <span th:case="'UNIV'">대학교(4년제)</span>
                                    <span th:case="'GRAD'">대학원</span>
                                    <span th:case="*"
                                          th:text="${edu.schoolType} ?: '-'">-</span>
                                </div>
                            </div>
                            <div class="col-md-4 mb-1">
                                <div class="text-gray-600">학교명</div>
                                <div class="font-weight-bold"
                                     th:text="${edu.schoolName} ?: '-'">○○대학교</div>
                            </div>
                            <div class="col-md-4 mb-1">
                                <div class="text-gray-600">전공명</div>
                                <div class="font-weight-bold"
                                     th:text="${edu.majorName} ?: '-'">경영학과</div>
                            </div>
                        </div>

                        <div class="row small mt-2">
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">입학년월</div>
                                <div th:text="${edu.entranceYM} ?: '-'">2020</div>
                            </div>
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">졸업년월</div>
                                <div th:text="${edu.graduationYM} ?: '-'">2024</div>
                            </div>
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">평점</div>
                                <div th:text="${edu.grade} ?: '-'">3.8</div>
                            </div>
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">만점</div>
                                <div th:text="${edu.gradeMax} ?: '-'">4.5</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Career: 경력 -->
            <div class="card shadow mb-4">
                <div class="card-header py-3 d-flex align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-briefcase mr-1"></i> 경력 (Career)
                    </h6>
                </div>
                <div class="card-body">
                    <div th:if="*{careers == null or #lists.isEmpty(careers)}"
                         class="text-muted small">
                        등록된 경력 정보가 없습니다.
                    </div>

                    <div th:each="career, stat : *{careers}"
                         class="border rounded bg-light p-3 mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="entity-block-title small font-weight-bold text-primary">
                                경력 [[${stat.index + 1}]]
                            </span>
                        </div>

                        <div class="row small">
                            <div class="col-md-6 mb-1">
                                <div class="text-gray-600">회사/기관명</div>
                                <div class="font-weight-bold"
                                     th:text="${career.companyName} ?: '-'">○○공사 경영기획팀</div>
                            </div>
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">고용 형태</div>
                                <div th:text="${career.employmentType} ?: '-'">정규직</div>
                            </div>
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">직무/직책</div>
                                <div th:text="${career.positionTitle} ?: '-'">경영기획 인턴</div>
                            </div>
                        </div>

                        <div class="row small mt-2">
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">입사일</div>
                                <div th:text="${#temporals.format(career.startDate, 'yyyy-MM-dd')}"
                                     th:if="${career.startDate != null}">2024-01-01</div>
                                <div th:if="${career.startDate == null}">-</div>
                            </div>
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">퇴사일</div>
                                <div th:text="${#temporals.format(career.endDate, 'yyyy-MM-dd')}"
                                     th:if="${career.endDate != null}">2024-06-30</div>
                                <div th:if="${career.endDate == null}">-</div>
                            </div>
                            <div class="col-md-6 mb-1">
                                <div class="text-gray-600">담당 업무 요약</div>
                                <div th:text="${career.responsibilities} ?: '-'">
                                    경영지표 집계, 회의자료 작성, 민원 응대 지원 등
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Activity & Training -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-users mr-1"></i> 대외활동 (Activity) & 교육·연수 (Training)
                    </h6>
                </div>
                <div class="card-body">
                    <!-- Activity -->
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <div>
                            <div class="text-primary text-uppercase small font-weight-bold mb-1">
                                대외활동 (Activity)
                            </div>
                            <div class="small text-muted">
                                동아리, 학생회, 봉사활동, 공모전, 인턴 외 활동.
                            </div>
                        </div>
                    </div>

                    <div th:if="*{activities == null or #lists.isEmpty(activities)}"
                         class="text-muted small mb-3">
                        등록된 대외활동 정보가 없습니다.
                    </div>

                    <div th:each="act, stat : *{activities}"
                         class="border rounded bg-light p-3 mb-3">
                        <div class="entity-block-header d-flex align-items-center justify-content-between mb-2">
                            <span class="entity-block-title small font-weight-bold text-primary">
                                활동 [[${stat.index + 1}]]
                            </span>
                        </div>
                        <div class="row small">
                            <div class="col-md-4 mb-1">
                                <div class="text-gray-600">활동 유형</div>
                                <div th:text="${act.activityType} ?: '-'">학생회</div>
                            </div>
                            <div class="col-md-8 mb-1">
                                <div class="text-gray-600">기관/조직명</div>
                                <div th:text="${act.organizationName} ?: '-'">○○대학교 총학생회</div>
                            </div>
                        </div>
                        <div class="row small mt-2">
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">시작월</div>
                                <div th:text="${act.startMonth} ?: '-'">2023-03</div>
                            </div>
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">종료월</div>
                                <div th:text="${act.endMonth} ?: '-'">2023-12</div>
                            </div>
                            <div class="col-md-6 mb-1">
                                <div class="text-gray-600">주요 내용</div>
                                <div th:text="${act.description} ?: '-'">
                                    기획, 행사 운영, 예산 집행, 발표 등 역할 중심으로 작성
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <!-- Training -->
                    <div class="d-flex align-items-center justify-content-between mt-3 mb-2">
                        <div>
                            <div class="text-primary text-uppercase small font-weight-bold mb-1">
                                교육 · 연수 (Training)
                            </div>
                            <div class="small text-muted">
                                직무 관련 교육, 부트캠프, 국비과정, 어학연수 등.
                            </div>
                        </div>
                    </div>

                    <div th:if="*{trainings == null or #lists.isEmpty(trainings)}"
                         class="text-muted small">
                        등록된 교육·연수 정보가 없습니다.
                    </div>

                    <div th:each="tr, stat : *{trainings}"
                         class="border rounded bg-light p-3 mb-3">
                        <div class="d-flex align-items-center justify-content-between mb-2">
                            <span class="entity-block-title small font-weight-bold text-primary">
                                교육/연수 [[${stat.index + 1}]]
                            </span>
                        </div>
                        <div class="row small">
                            <div class="col-md-6 mb-1">
                                <div class="text-gray-600">교육/연수명</div>
                                <div th:text="${tr.trainingName} ?: '-'">
                                    공공데이터 분석 전문가 과정
                                </div>
                            </div>
                            <div class="col-md-6 mb-1">
                                <div class="text-gray-600">교육기관명</div>
                                <div th:text="${tr.institutionName} ?: '-'">
                                    ○○교육원, ○○대학교 평생교육원
                                </div>
                            </div>
                        </div>
                        <div class="row small mt-2">
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">시작월</div>
                                <div th:text="${tr.startMonth} ?: '-'">2023-01</div>
                            </div>
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">종료월</div>
                                <div th:text="${tr.endMonth} ?: '-'">2023-06</div>
                            </div>
                            <div class="col-md-6 mb-1">
                                <div class="text-gray-600">주요 내용</div>
                                <div th:text="${tr.description} ?: '-'">
                                    수강 시간, 커리큘럼, 프로젝트 수행 등 요약
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Certificate & LanguageScore -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-certificate mr-1"></i> 자격증 (Certificate) · 어학 (LanguageScore)
                    </h6>
                </div>
                <div class="card-body">
                    <!-- Certificates -->
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <div>
                            <div class="text-primary text-uppercase small font-weight-bold mb-1">
                                자격증 (Certificate)
                            </div>
                            <div class="small text-muted">
                                공고에서 요구하거나 우대하는 자격증 위주.
                            </div>
                        </div>
                    </div>

                    <div th:if="*{certificates == null or #lists.isEmpty(certificates)}"
                         class="text-muted small mb-3">
                        등록된 자격증 정보가 없습니다.
                    </div>

                    <div th:each="cert, stat : *{certificates}"
                         class="border rounded bg-light p-3 mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="entity-block-title small font-weight-bold text-primary">
                                자격증 [[${stat.index + 1}]]
                            </span>
                        </div>
                        <div class="row small">
                            <div class="col-md-5 mb-1">
                                <div class="text-gray-600">자격증명</div>
                                <div th:text="${cert.certificateName} ?: '-'">
                                    사회조사분석사 2급
                                </div>
                            </div>
                            <div class="col-md-4 mb-1">
                                <div class="text-gray-600">발행기관</div>
                                <div th:text="${cert.issuer} ?: '-'">
                                    한국산업인력공단
                                </div>
                            </div>
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">취득월</div>
                                <div th:text="${cert.acquiredMonth} ?: '-'">2023-10</div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <!-- Language Scores -->
                    <div class="d-flex align-items-center justify-content-between mt-3 mb-2">
                        <div class="text-primary text-uppercase small font-weight-bold">
                            어학 (LanguageScore)
                        </div>
                    </div>

                    <div th:if="*{languageScores == null or #lists.isEmpty(languageScores)}"
                         class="text-muted small">
                        등록된 어학 성적 정보가 없습니다.
                    </div>

                    <div th:each="lang, stat : *{languageScores}"
                         class="border rounded bg-light p-3 mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="entity-block-title small font-weight-bold text-primary">
                                어학 성적 [[${stat.index + 1}]]
                            </span>
                        </div>
                        <div class="row small">
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">언어</div>
                                <div th:text="${lang.languageName} ?: '-'">영어</div>
                            </div>
                            <div class="col-md-4 mb-1">
                                <div class="text-gray-600">시험명</div>
                                <div th:text="${lang.examName} ?: '-'">TOEIC</div>
                            </div>
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">점수/등급</div>
                                <div th:text="${lang.score} ?: '-'">850점</div>
                            </div>
                            <div class="col-md-2 mb-1">
                                <div class="text-gray-600">취득일</div>
                                <div th:text="${#temporals.format(lang.acquiredDate, 'yyyy-MM-dd')}"
                                     th:if="${lang.acquiredDate != null}">2023-09-01</div>
                                <div th:if="${lang.acquiredDate == null}">-</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- OverseasExperience -->
            <div class="card shadow mb-4">
                <div class="card-header py-3 d-flex align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-globe-asia mr-1"></i> 해외 경험 (OverseasExperience)
                    </h6>
                    <span class="small text-gray-500">
                        history/자기소개서 화면에 함께 활용 가능합니다.
                    </span>
                </div>
                <div class="card-body">
                    <div th:if="*{overseasExperiences == null or #lists.isEmpty(overseasExperiences)}"
                         class="text-muted small">
                        등록된 해외 경험 정보가 없습니다.
                    </div>

                    <div th:each="ov, stat : *{overseasExperiences}"
                         class="border rounded bg-light p-3 mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="entity-block-title small font-weight-bold text-primary">
                                해외 경험 [[${stat.index + 1}]]
                            </span>
                        </div>
                        <div class="row small">
                            <div class="col-md-4 mb-1">
                                <div class="text-gray-600">국가</div>
                                <div th:text="${ov.country} ?: '-'">미국</div>
                            </div>
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">시작월</div>
                                <div th:text="${ov.startMonth} ?: '-'">2022-01</div>
                            </div>
                            <div class="col-md-3 mb-1">
                                <div class="text-gray-600">종료월</div>
                                <div th:text="${ov.endMonth} ?: '-'">2022-06</div>
                            </div>
                        </div>
                        <div class="row small mt-2">
                            <div class="col-md-12 mb-1">
                                <div class="text-gray-600">주요 내용</div>
                                <div th:text="${ov.description} ?: '-'">
                                    교환학생으로 전공 과목 수강, 프로젝트 수행, 현지 봉사활동 등
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 하단 버튼 -->
            <div class="d-flex justify-content-between mb-4">
                <div>
                    <a th:href="@{/resumes}" class="btn btn-light border">
                        <i class="fas fa-list mr-1"></i> 목록으로
                    </a>
                </div>
                <div>
                    <a th:href="@{/resumes/edit}" class="btn btn-primary mr-2">
                        <i class="fas fa-edit mr-1"></i> 이력 수정
                    </a>
                    <button type="button" class="btn btn-outline-info" onclick="window.print()">
                        <i class="fas fa-print mr-1"></i> 인쇄
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<th:block layout:fragment="script-extra">
    <script>
        // 조회 화면이라 별도 동적 스크립트는 최소화
    </script>
</th:block>
</body>
</html>